<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>sgdk: dma.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript">
$(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.4 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">sgdk</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('dma_8h.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">dma.h</div>  </div>
</div>
<div class="contents">
<a href="dma_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 
<a name="l00010"></a>00010 <span class="preprocessor">#include &quot;<a class="code" href="config_8h.html" title="Basic SGDK library configuration file.">config.h</a>&quot;</span>
<a name="l00011"></a>00011 <span class="preprocessor">#include &quot;<a class="code" href="types_8h.html" title="Types definition.">types.h</a>&quot;</span>
<a name="l00012"></a>00012 
<a name="l00013"></a>00013 <span class="preprocessor">#ifndef _DMA_H_</span>
<a name="l00014"></a>00014 <span class="preprocessor"></span><span class="preprocessor">#define _DMA_H_</span>
<a name="l00015"></a>00015 <span class="preprocessor"></span>
<a name="l00016"></a>00016 
<a name="l00021"></a><a class="code" href="dma_8h.html#a80fa205e121ddbeea81d7768480ed755">00021</a> <span class="preprocessor">#define DMA_VRAM    0</span>
<a name="l00022"></a>00022 <span class="preprocessor"></span>
<a name="l00026"></a><a class="code" href="dma_8h.html#acc5fa52d71527db5145b456d50e72932">00026</a> <span class="preprocessor">#define DMA_CRAM    1</span>
<a name="l00027"></a>00027 <span class="preprocessor"></span>
<a name="l00031"></a><a class="code" href="dma_8h.html#a3bbb0cd77f08b981e4b1bf80db0ab6ad">00031</a> <span class="preprocessor">#define DMA_VSRAM   2</span>
<a name="l00032"></a>00032 <span class="preprocessor"></span>
<a name="l00033"></a>00033 
<a name="l00038"></a><a class="code" href="dma_8h.html#a8914f69bb5412daf6b28aff2702bf481">00038</a> <span class="keyword">typedef</span> <span class="keyword">enum</span>
<a name="l00039"></a>00039 {
<a name="l00040"></a><a class="code" href="dma_8h.html#a8914f69bb5412daf6b28aff2702bf481a0035eb0600d18dfc302f6bf7a7cbfa3b">00040</a>     <a class="code" href="dma_8h.html#a8914f69bb5412daf6b28aff2702bf481a0035eb0600d18dfc302f6bf7a7cbfa3b">CPU</a> = 0,            
<a name="l00041"></a><a class="code" href="dma_8h.html#a8914f69bb5412daf6b28aff2702bf481a6537a62f6f155792bb9a320ee2ec4d68">00041</a>     <a class="code" href="dma_8h.html#a8914f69bb5412daf6b28aff2702bf481a6537a62f6f155792bb9a320ee2ec4d68">DMA</a> = 1,            
<a name="l00042"></a><a class="code" href="dma_8h.html#a8914f69bb5412daf6b28aff2702bf481a5cf93c26f5b5eadbcd28a16de3c7dfa1">00042</a>     <a class="code" href="dma_8h.html#a8914f69bb5412daf6b28aff2702bf481a5cf93c26f5b5eadbcd28a16de3c7dfa1">DMA_QUEUE</a> = 2,      
<a name="l00043"></a>00043 } <a class="code" href="dma_8h.html#a8914f69bb5412daf6b28aff2702bf481" title="VRAM transfer method.">TransferMethod</a>;
<a name="l00044"></a>00044 
<a name="l00045"></a>00045 
<a name="l00050"></a><a class="code" href="struct_d_m_a_op_info.html">00050</a> <span class="keyword">typedef</span> <span class="keyword">struct</span>
<a name="l00051"></a>00051 {
<a name="l00052"></a>00052     <a class="code" href="types_8h.html#a449a74b72ed931d627eca7efcc6f8c9d">u32</a> regLen;         <span class="comment">// ((len | (len &lt;&lt; 8)) &amp; 0xFF00FF) | 0x94009300;</span>
<a name="l00053"></a>00053     <a class="code" href="types_8h.html#a449a74b72ed931d627eca7efcc6f8c9d">u32</a> regAddrMStep;   <span class="comment">// (((addr &lt;&lt; 7) &amp; 0xFF0000) | 0x96008F00) + step;</span>
<a name="l00054"></a>00054     <a class="code" href="types_8h.html#a449a74b72ed931d627eca7efcc6f8c9d">u32</a> regAddrHAddrL;  <span class="comment">// ((addr &gt;&gt; 1) &amp; 0x7F00FF) | 0x97009500;</span>
<a name="l00055"></a>00055     <a class="code" href="types_8h.html#a449a74b72ed931d627eca7efcc6f8c9d">u32</a> regCtrlWrite;   <span class="comment">// GFX_DMA_VRAMCOPY_ADDR(to)</span>
<a name="l00056"></a>00056 } <a class="code" href="struct_d_m_a_op_info.html" title="DMA transfer definition (used for DMA queue)">DMAOpInfo</a>;
<a name="l00057"></a>00057 
<a name="l00058"></a>00058 
<a name="l00063"></a>00063 <span class="keyword">extern</span> <a class="code" href="struct_d_m_a_op_info.html" title="DMA transfer definition (used for DMA queue)">DMAOpInfo</a> *<a class="code" href="dma_8h.html#af1aff8646444028d4d674bbb77cb8573" title="DMA queue structure.">dmaQueues</a>;
<a name="l00064"></a>00064 
<a name="l00065"></a>00065 
<a name="l00082"></a>00082 <span class="keywordtype">void</span> <a class="code" href="dma_8h.html#a25c0954a83a34c1065df3466899ef9ac" title="Initialize the DMA queue sub system.">DMA_init</a>(<a class="code" href="types_8h.html#a8aa9149a22317014c683c48cebd8cfef">u16</a> size, <a class="code" href="types_8h.html#a8aa9149a22317014c683c48cebd8cfef">u16</a> capacity);
<a name="l00083"></a>00083 
<a name="l00092"></a>00092 <a class="code" href="types_8h.html#a8aa9149a22317014c683c48cebd8cfef">u16</a> <a class="code" href="dma_8h.html#a3f78a14fab51ee0d5a5f3236cfa49246" title="Returns TRUE if the DMA_flushQueue() method is automatically called at VBlank to process DMA operatio...">DMA_getAutoFlush</a>();
<a name="l00101"></a>00101 <span class="keywordtype">void</span> <a class="code" href="dma_8h.html#aced967ee6e88c810b0f752c41f8a2105" title="If set to TRUE (default) then the DMA_flushQueue() method is automatically called at VBlank to proces...">DMA_setAutoFlush</a>(<span class="keywordtype">bool</span> value);
<a name="l00108"></a>00108 <a class="code" href="types_8h.html#ad54124d5ddef23f4d85df6f12e3501a4">s16</a> <a class="code" href="dma_8h.html#a4d5fb94e081a4df39ba948a03febda67" title="Returns the maximum allowed size (in bytes) to transfer per DMA_flushQueue() call.">DMA_getMaxTransferSize</a>();
<a name="l00121"></a>00121 <span class="keywordtype">void</span> <a class="code" href="dma_8h.html#a11abe59cc3fafad34a89abc7187e5e42" title="Sets the maximum amount of data (in bytes) to transfer per DMA_flushQueue() call.  VBlank period allo...">DMA_setMaxTransferSize</a>(<a class="code" href="types_8h.html#ad54124d5ddef23f4d85df6f12e3501a4">s16</a> value);
<a name="l00128"></a>00128 <span class="keywordtype">void</span> <a class="code" href="dma_8h.html#ab57a5f92ebf1608cd0320882b3d57c09" title="Sets the maximum amount of data (in bytes) to default value (7.2 KB on NTSC system and 15 KB on PAL s...">DMA_setMaxTransferSizeToDefault</a>();
<a name="l00135"></a>00135 <a class="code" href="types_8h.html#a8aa9149a22317014c683c48cebd8cfef">u16</a> <a class="code" href="dma_8h.html#a520b961ff7fdd6d4c0dfc04902a09950" title="Return TRUE means that we ignore future DMA operation when we reach the maximum capacity (see DMA_set...">DMA_getIgnoreOverCapacity</a>();
<a name="l00146"></a>00146 <span class="keywordtype">void</span> <a class="code" href="dma_8h.html#a553f875c4603a7f5ad6f84bb945ee347" title="Set the &quot;over capacity&quot; DMA queue strategy (default is FALSE).">DMA_setIgnoreOverCapacity</a>(<span class="keywordtype">bool</span> value);
<a name="l00147"></a>00147 
<a name="l00153"></a>00153 <span class="keywordtype">void</span> <a class="code" href="dma_8h.html#a6f0144fc374e2ad40942aa1611f05fe3" title="Clears the DMA queue (all queued operations are lost). ">DMA_clearQueue</a>();
<a name="l00166"></a>00166 <span class="keywordtype">void</span> <a class="code" href="dma_8h.html#a17d3b25af3c1ce3dfe3457524f48069f" title="Transfer the content of the DMA queue to the VDP:  Each pending DMA operation is sent to the VDP and ...">DMA_flushQueue</a>();
<a name="l00167"></a>00167 
<a name="l00172"></a>00172 <a class="code" href="types_8h.html#a8aa9149a22317014c683c48cebd8cfef">u16</a> <a class="code" href="dma_8h.html#a2415fb8d52144a7c6d2b55fafd8977dc" title="Returns the number of transfer currently pending in the DMA queue.">DMA_getQueueSize</a>();
<a name="l00179"></a>00179 <a class="code" href="types_8h.html#a449a74b72ed931d627eca7efcc6f8c9d">u32</a> <a class="code" href="dma_8h.html#a977fef48a0db1b8cedd70d0a3ccedc8a" title="Returns the size (in byte) of data to be transfered currently present in the DMA queue.  NTSC frame allows about 7.6 KB of data to be transfered during VBlank (in H40) while PAL frame allows about 17 KB (in H40).">DMA_getQueueTransferSize</a>();
<a name="l00180"></a>00180 
<a name="l00206"></a>00206 <a class="code" href="types_8h.html#a8aa9149a22317014c683c48cebd8cfef">u16</a> <a class="code" href="dma_8h.html#a2e706dfcc8518c9b761b8f41b02582a8" title="Queues the specified DMA transfer operation in the DMA queue.  The idea of the DMA queue is to burst ...">DMA_queueDma</a>(<a class="code" href="types_8h.html#ab9f930ae0484417a1883fd3f7cdb490e">u8</a> location, <a class="code" href="types_8h.html#a449a74b72ed931d627eca7efcc6f8c9d">u32</a> from, <a class="code" href="types_8h.html#a8aa9149a22317014c683c48cebd8cfef">u16</a> to, <a class="code" href="types_8h.html#a8aa9149a22317014c683c48cebd8cfef">u16</a> len, <a class="code" href="types_8h.html#a8aa9149a22317014c683c48cebd8cfef">u16</a> step);
<a name="l00229"></a>00229 <span class="keywordtype">void</span> <a class="code" href="dma_8h.html#a4d6e5fdefeb1c4fd0cb8b1d444754239" title="Do DMA transfer operation immediately.">DMA_doDma</a>(<a class="code" href="types_8h.html#ab9f930ae0484417a1883fd3f7cdb490e">u8</a> location, <a class="code" href="types_8h.html#a449a74b72ed931d627eca7efcc6f8c9d">u32</a> from, <a class="code" href="types_8h.html#a8aa9149a22317014c683c48cebd8cfef">u16</a> to, <a class="code" href="types_8h.html#a8aa9149a22317014c683c48cebd8cfef">u16</a> len, <a class="code" href="types_8h.html#ad54124d5ddef23f4d85df6f12e3501a4">s16</a> step);
<a name="l00230"></a>00230 
<a name="l00235"></a>00235 <span class="keywordtype">void</span> <a class="code" href="dma_8h.html#a4edc7297e8050aea2fc7118217026d88" title="Wait current DMA fill/copy operation to complete (same as VDP_waitDMACompletion())">DMA_waitCompletion</a>();
<a name="l00236"></a>00236 
<a name="l00252"></a>00252 <span class="keywordtype">void</span> <a class="code" href="dma_8h.html#a9b41128bc1718e9006a1d6152638bc8a" title="Do VRAM DMA fill operation.">DMA_doVRamFill</a>(<a class="code" href="types_8h.html#a8aa9149a22317014c683c48cebd8cfef">u16</a> to, <a class="code" href="types_8h.html#a8aa9149a22317014c683c48cebd8cfef">u16</a> len, <a class="code" href="types_8h.html#ab9f930ae0484417a1883fd3f7cdb490e">u8</a> value, <a class="code" href="types_8h.html#ad54124d5ddef23f4d85df6f12e3501a4">s16</a> step);
<a name="l00267"></a>00267 <span class="keywordtype">void</span> <a class="code" href="dma_8h.html#aa12867eb4ae5e0ddad4086ee564cfa5b" title="Do VRAM DMA copy operation.">DMA_doVRamCopy</a>(<a class="code" href="types_8h.html#a8aa9149a22317014c683c48cebd8cfef">u16</a> from, <a class="code" href="types_8h.html#a8aa9149a22317014c683c48cebd8cfef">u16</a> to, <a class="code" href="types_8h.html#a8aa9149a22317014c683c48cebd8cfef">u16</a> len, <a class="code" href="types_8h.html#ad54124d5ddef23f4d85df6f12e3501a4">s16</a> step);
<a name="l00268"></a>00268 
<a name="l00269"></a>00269 
<a name="l00270"></a>00270 <span class="preprocessor">#endif // _DMA_H_</span>
</pre></div></div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="dma_8h.html">dma.h</a>      </li>
      <li class="footer">Generated on Wed Sep 4 2019 21:05:02 for sgdk by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>


</body>
</html>
